# Sistema de An√°lise Inteligente de S√≠mbolos

## Vis√£o Geral

O Sistema de An√°lise Inteligente de S√≠mbolos √© uma implementa√ß√£o completa que analisa dados de mercado de criptomoedas, calcula indicadores t√©cnicos, identifica padr√µes e gera sinais de trading baseados em intelig√™ncia artificial e an√°lise t√©cnica avan√ßada.

## Caracter√≠sticas Principais

### üéØ An√°lise T√©cnica Avan√ßada
- **Indicadores T√©cnicos**: RSI, MACD, Bandas de Bollinger, M√©dias M√≥veis (EMA/SMA), Estoc√°stico, ATR
- **An√°lise de Padr√µes**: Identifica√ß√£o autom√°tica de padr√µes de candlestick
- **An√°lise de Volume**: Detec√ß√£o de picos de volume e tend√™ncias
- **An√°lise de Volatilidade**: Classifica√ß√£o de n√≠veis de volatilidade

### üß† Gera√ß√£o Inteligente de Sinais
- **Sinais Multi-fonte**: Combina√ß√£o de indicadores t√©cnicos, volume, volatilidade e padr√µes
- **Sistema de Confian√ßa**: Cada sinal possui um score de confian√ßa (0-100%)
- **Consolida√ß√£o de Sinais**: Evita redund√¢ncia agrupando sinais similares
- **Filtragem Inteligente**: Remove sinais com baixa confian√ßa

### ‚ö†Ô∏è An√°lise de Risco e Oportunidade
- **Score de Risco**: An√°lise quantitativa de fatores de risco (0-100%)
- **Score de Oportunidade**: Identifica√ß√£o de oportunidades de trading (0-100%)
- **Recomenda√ß√µes Inteligentes**: Sugest√µes baseadas na an√°lise combinada

### üíæ Persist√™ncia e Hist√≥rico
- **Banco PostgreSQL**: Armazenamento de dados de mercado, an√°lises e sinais
- **Cache Inteligente**: Reutiliza√ß√£o de dados para melhor performance
- **Hist√≥rico Completo**: Tracking de todas as an√°lises e sinais gerados

## Arquitetura do Sistema

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Dados de      ‚îÇ    ‚îÇ    An√°lise       ‚îÇ    ‚îÇ    Sinais       ‚îÇ
‚îÇ   Mercado       ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    T√©cnica       ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   de Trading    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PostgreSQL    ‚îÇ    ‚îÇ Indicadores &    ‚îÇ    ‚îÇ   Registro      ‚îÇ
‚îÇ   Database      ‚îÇ    ‚îÇ Padr√µes          ‚îÇ    ‚îÇ   no Banco      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Uso B√°sico

### 1. An√°lise Simples de um S√≠mbolo

```python
from src.analysis.symbol_analyzer import analyze_symbol

# An√°lise completa de BTC/USDT
result = analyze_symbol('BTCUSDT', timeframe='1h', limit=100)

if result:
    print(f"S√≠mbol: {result['symbol']}")
    print(f"Recomenda√ß√£o: {result['summary']['recommendation']}")
    print(f"Sinais encontrados: {len(result['signals'])}")
```

### 2. Uso da Classe Principal

```python
from src.analysis.symbol_analyzer import SymbolAnalyzer

# Criar inst√¢ncia do analisador
analyzer = SymbolAnalyzer()

# An√°lise passo a passo
market_data = analyzer.fetch_market_data('ETHUSDT', '15m', 200)
processed_data = analyzer.process_data(market_data)
signals = analyzer.generate_signals('ETHUSDT', processed_data)
risk_analysis = analyzer.analyze_risk('ETHUSDT', processed_data)
```

### 3. An√°lise de M√∫ltiplos S√≠mbolos

```python
symbols = ['BTCUSDT', 'ETHUSDT', 'ADAUSDT', 'BNBUSDT']
results = {}

for symbol in symbols:
    result = analyze_symbol(symbol)
    if result:
        results[symbol] = result

# Processa resultados...
```

## Estrutura dos Dados Retornados

### An√°lise Completa
```python
{
    'symbol': 'BTCUSDT',
    'timeframe': '1h',
    'timestamp': '2025-01-06T12:00:00',
    'market_data': {
        'technical_indicators': {...},
        'volatility_analysis': {...},
        'volume_analysis': {...},
        'pattern_analysis': {...}
    },
    'signals': [...],
    'risk_analysis': {...},
    'opportunity_analysis': {...},
    'summary': {...}
}
```

### Estrutura de um Sinal
```python
{
    'symbol': 'BTCUSDT',
    'signal_type': 'buy',  # 'buy', 'sell', 'hold'
    'strength': 0.75,      # 0.0 a 1.0
    'confidence': 0.82,    # 0.0 a 1.0
    'price': 45000.0,
    'timestamp': '2025-01-06T12:00:00',
    'reasoning': 'RSI saindo de √°rea de sobrevenda',
    'indicators_data': {...},
    'source': 'technical_rsi'
}
```

### An√°lise de Risco
```python
{
    'overall_risk': 'medium',  # 'low', 'medium', 'high'
    'risk_score': 0.45,        # 0.0 a 1.0
    'factors': [
        {
            'factor': 'high_volatility',
            'weight': 0.3,
            'description': 'Alta volatilidade detectada'
        }
    ],
    'recommendations': [...]
}
```

## Indicadores T√©cnicos Dispon√≠veis

### RSI (Relative Strength Index)
- **Per√≠odo padr√£o**: 14
- **Sinais**: Sobrecompra (>70), Sobrevenda (<30)
- **Cruzamentos**: Entrada/sa√≠da das zonas extremas

### MACD
- **Configura√ß√£o**: 12, 26, 9
- **Sinais**: Cruzamentos da linha MACD com a linha de sinal
- **Histograma**: For√ßa da tend√™ncia

### Bandas de Bollinger
- **Per√≠odo**: 20
- **Desvio**: 2
- **Sinais**: Pre√ßo tocando bandas superior/inferior

### M√©dias M√≥veis
- **EMA 9 e 21**: Tend√™ncias de curto prazo
- **SMA 50 e 200**: Tend√™ncias de longo prazo
- **Golden/Death Cross**: Cruzamentos significativos

### Estoc√°stico
- **Per√≠odos**: %K=14, %D=3
- **Sinais**: Zonas de sobrecompra/sobrevenda

### ATR (Average True Range)
- **Per√≠odo**: 14
- **Uso**: Medi√ß√£o de volatilidade

## An√°lise de Padr√µes

### Padr√µes de Candlestick
- **Doji**: Indecis√£o do mercado
- **Hammer**: Poss√≠vel revers√£o de alta
- **Shooting Star**: Poss√≠vel revers√£o de baixa

### Padr√µes de Pre√ßo
- **Breakout High**: Rompimento de m√°ximas
- **Breakdown Low**: Rompimento de m√≠nimas
- **Consolida√ß√£o**: Per√≠odos de baixa volatilidade

## Configura√ß√£o e Instala√ß√£o

### Depend√™ncias
```bash
pip install pandas numpy sqlalchemy psycopg2-binary
```

### Configura√ß√£o do Banco de Dados

O sistema requer PostgreSQL configurado. As vari√°veis de ambiente necess√°rias:

```bash
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=robot_crypt
POSTGRES_USER=your_user
POSTGRES_PASSWORD=your_password
```

### Inicializa√ß√£o das Tabelas

O sistema cria automaticamente as tabelas necess√°rias:
- `trading_signals`: Sinais gerados
- `market_analysis`: An√°lises completas
- `technical_indicators`: Indicadores calculados
- `price_history`: Dados OHLCV

## Script de Exemplo

Execute o script de exemplo para ver o sistema em a√ß√£o:

```bash
cd scripts
python example_symbol_analysis.py
```

### Op√ß√µes do Script
1. **An√°lise completa**: Analisa m√∫ltiplos s√≠mbolos
2. **Teste individual**: Testa fun√ß√µes separadamente
3. **Ambos**: Executa an√°lise completa + testes

## Personaliza√ß√£o

### Configurando Par√¢metros

```python
analyzer = SymbolAnalyzer()

# Modificar configura√ß√µes
analyzer.config['min_confidence_threshold'] = 0.7  # Confian√ßa m√≠nima
analyzer.config['volatility_window'] = 30          # Janela de volatilidade
analyzer.config['volume_threshold_multiplier'] = 2.0  # Multiplicador de volume
```

### Adicionando Novos Indicadores

```python
class CustomAnalyzer(SymbolAnalyzer):
    def _generate_custom_signals(self, symbol, processed_data, current_price):
        signals = []
        
        # Implementar l√≥gica personalizada
        # ...
        
        return signals
```

## Integra√ß√£o com Trading Bot

### Usando Sinais para Trading
```python
def execute_trading_signals():
    symbols = ['BTCUSDT', 'ETHUSDT']
    
    for symbol in symbols:
        analysis = analyze_symbol(symbol)
        
        if analysis:
            best_signal = analysis['summary'].get('highest_confidence_signal')
            
            if best_signal and best_signal['confidence'] > 0.8:
                signal_type = best_signal['type']
                
                if signal_type == 'buy':
                    # Executar ordem de compra
                    place_buy_order(symbol, best_signal['price'])
                elif signal_type == 'sell':
                    # Executar ordem de venda
                    place_sell_order(symbol, best_signal['price'])
```

## Monitoramento e Logs

### Logs Detalhados
O sistema gera logs detalhados para debugging:

```python
import logging

logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger("robot-crypt.symbol_analyzer")
```

### M√©tricas de Performance
- Tempo de an√°lise por s√≠mbolo
- Taxa de sucesso na gera√ß√£o de sinais
- Precis√£o dos sinais (a ser implementado)

## Limita√ß√µes e Considera√ß√µes

### Limita√ß√µes Atuais
- **Dados**: Dependente da qualidade dos dados da API Binance
- **Lat√™ncia**: An√°lise pode levar alguns segundos para s√≠mbolos complexos
- **Mem√≥ria**: Uso de mem√≥ria aumenta com hist√≥rico longo

### Considera√ß√µes de Risco
- **N√£o √© conselho financeiro**: Sistema para fins educacionais
- **Backtesting**: Recomendado testar estrat√©gias antes do uso real
- **Gest√£o de risco**: Sempre usar stop-loss e take-profit

## Pr√≥ximas Funcionalidades

### Em Desenvolvimento
- [ ] Machine Learning para predi√ß√£o de pre√ßos
- [ ] An√°lise de sentimento de not√≠cias
- [ ] Backtesting autom√°tico
- [ ] API REST para integra√ß√£o externa
- [ ] Dashboard web para visualiza√ß√£o

### Melhorias Planejadas
- [ ] Suporte a mais exchanges
- [ ] Indicadores t√©cnicos adicionais
- [ ] Otimiza√ß√£o de performance
- [ ] Alertas em tempo real
- [ ] Integra√ß√£o com Telegram

## Suporte e Contribui√ß√£o

### Relatando Problemas
- Abra uma issue no reposit√≥rio
- Inclua logs detalhados
- Descreva os passos para reproduzir

### Contribuindo
1. Fork do reposit√≥rio
2. Crie uma branch para sua feature
3. Implemente testes
4. Abra um Pull Request

## Exemplos Avan√ßados

### An√°lise Personalizada com Filtros
```python
def analyze_with_filters(symbol, min_volume=1000000):
    analyzer = SymbolAnalyzer()
    
    # Buscar dados
    market_data = analyzer.fetch_market_data(symbol, '1h', 100)
    
    # Filtrar por volume
    filtered_data = [d for d in market_data if d['volume'] > min_volume]
    
    if len(filtered_data) < 50:
        return None
    
    # Continuar an√°lise...
    processed_data = analyzer.process_data(filtered_data)
    return analyzer.generate_signals(symbol, processed_data)
```

### An√°lise Multi-timeframe
```python
def multi_timeframe_analysis(symbol):
    timeframes = ['15m', '1h', '4h', '1d']
    results = {}
    
    for tf in timeframes:
        result = analyze_symbol(symbol, timeframe=tf)
        if result:
            results[tf] = result
    
    # Combinar sinais de diferentes timeframes
    return combine_timeframe_signals(results)
```

Este sistema fornece uma base s√≥lida para an√°lise t√©cnica automatizada e pode ser expandido conforme suas necessidades espec√≠ficas de trading.
